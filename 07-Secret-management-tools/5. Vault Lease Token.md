- A lease is a time-bound permission Vault gives to a secret or credential.
- Vault doesn’t **give** secrets forever — it **loan** them

Lease Contain.
```php
# Example:
lease_id: database/creds/app-role/abcd1234
lease_duration: 3600
renewable: true
```

#### Why Leases exist(purpose)
Leases allow Vault to:
- Expire secrets automatically
- Renew secrets when needed
- Revoke secrets instantly
- Track who is using what

### What uses of Leases

| **Dynamic secrets**    | **Static secrets**            |
| ---------------------- | ----------------------------- |
| - Database credentials | - Usually no lease            |
| - AWS / Cloud IAM keys | - Unless wrapped or versioned |
| - PKI certificates     |                               |

### Using Lease with Dynamic Secrets in Vault
#### 1. Enable the Secrets Engine
```php 
vault secrets enable database
```

#### 2. Configure Database Connection
```php
# Vault needs **admin DB creds** (used only to create/revoke users).
vault write database/config/mysql \
  plugin_name=mysql-database-plugin \
  connection_url="{{username}}:{{password}}@tcp(127.0.0.1:3306)/" \
  allowed_roles="app-role" \
  username="root" \
  password="rootpass"
```

#### 3. Create a Role (Defines Lease Behavior)
```php
# This is where **TTL / lease rules** are set.
vault write database/roles/app-role \
  db_name=mysql \
  creation_statements="CREATE USER '{{name}}'@'%' IDENTIFIED BY '{{password}}';" \
  revocation_statements="DROP USER '{{name}}'@'%';" \
  default_ttl="1h" \
  max_ttl="24h"
```

#### 4. Request a Dynamic Secret (Lease Created)
```php
vault read database/creds/app-role

# Example output:
username: v-token-app-role-abc
password: XyZ123!!
lease_id: database/creds/app-role/abcd1234xyz
lease_duration: 3600
renewable: true

# - Secret is temporary
# - Lease ID controls it
```

#### 5. Renew the Lease (Extend TTL)
```php
# Before TTL expires:
vault lease renew database/creds/app-role/abcd1234xyz
```

#### 6. Revoke Lease Manually
```php
# Revoke single lease
vault lease revoke database/creds/app-role/abcd1234xyz

# Revoke all leases for a role
vault lease revoke -prefix database/creds/app-role
```

#### 7. View Active Leases
```php
# Show all active lease ID
vault list sys/leases/lookup/database/creds/app-role 
```