- **HashiCorp Vault** uses **policies** to define _what_ you can access, and **tokens** to represent _who_ you are.
### Step 1. Control Access (Most Important)
Create policy:
```bash
nano read-api.hcl
```

```bash
path "secret/data/api" {
   capabilities = ["read"] 
}
```

Apply or Load Policy:
```bash
vault policy write read-api read-api.hcl

# load the policy
vault policy write read-api api-read.hcl
```

Create a token with that policy:
```bash
vault token create -policy=read-api

# Create a Token with attack that policy and set env.
export VAULT_TOKEN="$(vault token create -field=token -policy=my-policy)"
```

Test:
```bash
export VAULT_TOKEN=s.limitedtoken vault kv get secret/api
```

### Policy Commands Cheat Sheet
```bash
# Write policy from HCL file (define permissions)
vault policy write read-api api-read.hcl

# List all policies
vault policy list

# Read policy content (audit/debug)
vault policy read read-api

# Delete the policy
vault policy delete policy_name
```


### Token Commands Cheat Sheet
```bash
# Create token with policy + TTL (user/app access)
vault token create -policy=read-api -ttl=1h

# Create service token (no parent, no default policy)
vault token create -policy=read-api -orphan -no-default-policy

# Revoke token immediately (incident response)
vault token revoke s.xxxxx
```

### Quick Mapping (Mental Model)
```bash
# Policy = permissions
vault policy write <policy>

# Token = identity + policy
vault token create -policy=<policy>
```

### Create a Token with that policy
```bash
vault token create -policy=read-api-ttl=1h
```
